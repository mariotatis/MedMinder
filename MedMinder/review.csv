filename,line of code,issue,impact,recommendation
/Presentation/Modules/Home/HomeView.swift,324,"Deprecated 'onChange(of:perform:)' usage","Warning / Future Incompatibility","Use `onChange(of: perform: { oldValue, newValue inV })` or zero-parameter closure as per iOS 17+"
/Presentation/Modules/Treatments/TreatmentCard.swift,49,"Text concatenation using '+' operator","Warning / Deprecated style","Use string interpolation `Text(""\(var)"")` or `HStack` for combining text elements"
/Presentation/Modules/Home/HomeViewModel.swift,54,"Force Unwrap `!` on Calendar date calculation","Potential Crash","Use `guard let` or `if let` to safely unwrap optional dates."
/Presentation/Modules/Treatments/TreatmentDosageRegistryViewModel.swift,103,"Force Unwrap `!` on Calendar date calculation","Potential Crash","Use `guard let` or `if let` to safely unwrap optional dates."
/Presentation/Modules/Treatments/TreatmentMedicationDetailViewModel.swift,ALL,"High Code Duplication with MedicationDetailViewModel","High Maintenance Effort","Refactor shared logic (e.g., date generation, dose marking) into a shared Service or BaseViewModel."
/Presentation/Modules/Medications/MedicationDetailViewModel.swift,ALL,"High Code Duplication with TreatmentMedicationDetailViewModel","High Maintenance Effort","Refactor shared logic (e.g., date generation, dose marking) into a shared Service or BaseViewModel."
/Presentation/Modules/Home/HomeView.swift,359,"Business Logic in View (Helper methods for dose calculation)","Architecture Violation (MVVM)","Move helper methods `doseKey`, `getDoseTime`, `setDoseTime` to HomeViewModel."
/Presentation/Modules/Home/HomeView.swift,ALL,"Long View File (>400 lines)","Reduced Readability","Split `HomeView` into smaller subviews (e.g., `HomeEmptyStateView`, `HomeDoseCardView`, `HomeSectionView`)."
/Presentation/Modules/Treatments/TreatmentMedicationDetailViewModel.swift,90,"Complex Business Logic (Date Calculation) in ViewModel","Architecture Coupling","Move complex schedule generation logic to a Domain Service or Use Case (e.g. `MedicationScheduleService`)."
/Presentation/Modules/Home/HomeView.swift,12,"State usage for pending actions","Complexity","Consider moving `pendingDoseAction` state management to ViewModel to separate view state from business logic flow."
/Presentation/Modules/Treatments/TreatmentMedicationDetailViewModel.swift,ALL,"Potential AI-Generated Code Patterns (Repetitive logic blocks, verbose comments)","Maintenance Difficulty","Refactor to use loops or shared functions instead of repeating similar blocks for related logic."
/Presentation/Modules/Home/HomeView.swift,381,"Closure implementation inside View method","Readability","Move the logging logic to the ViewModel and expose a clean method `viewModel.logDose(...)`."
/Domain/UseCases/MedicationUseCases.swift,4,"Concrete Class used for Injection","Violation of Dependency Inversion Principle / Hard to Unit Test","Create protocol `MedicationUseCaseProtocol` and make `MedicationUseCases` conform to it. Inject the protocol into ViewModels."
/Presentation/Modules/Home/HomeViewModel.swift,91,"Complex Schedule Calculation Logic","Violation of Single Responsibility Principle (SRP) / Logic Duplication","Extract schedule generation to a dedicated Domain Service (e.g., `ScheduleService`)."
/Presentation/Modules/Treatments/TreatmentDosageRegistryView.swift,80,"Filtering and Sorting logic inside View body","Unit Testing Difficulty / View Logic","Move filtering and sorting logic to ViewModel properties (e.g., `viewModel.upcomingDoses`)."
/Presentation/Modules/Treatments/TreatmentDosageRegistryViewModel.swift,63,"Duplicated Schedule Logic (Logic matches HomeViewModel)","Maintenance Nightmare / DRY Violation","Refactor into shared `ScheduleService` to be used by all ViewModels needing schedule generation."
/Presentation/Modules/Treatments/TreatmentMedicationDetailView.swift,353,"Manual ViewModel Instantiation in View","Tight Coupling / Hard to Test","Use a Factory pattern or Coordinator to create ViewModels, or inject `AddMedicationViewModel` as an `ObservableObject` if possible."
/Presentation/Modules/Profiles/ProfileDetailView.swift,25,"Hardcoded User Facing Strings","Localization Limit","Replace ""years old"", ""Treatments"", etc. with `NSLocalizedString` keys or String Catalog entries."
/Presentation/Modules/Home/HomeView.swift,96,"Hardcoded User Facing Strings (""Taken"", ""Skipped"")","Localization Limit","Replace hardcoded action labels with localized strings."
/Presentation/Modules/Treatments/TreatmentCard.swift,11,"Custom Cards lacking Accessibility Modifiers","Accessibility Barrier","Add `.accessibilityElement(children: .combine)` and `.accessibilityLabel(...)` to `TreatmentCard`."
/Presentation/Modules/Home/HomeView.swift,93,"Image buttons lacking Accessibility Labels","Accessibility Barrier","Ensure Buttons with Images/Icons have `.accessibilityLabel` or use `Label` with text title."
/Presentation/Modules/Profiles/AddProfileView.swift,23,"Magic Number `.frame(width: 150)`","Design Inconsistency","Move hardcoded dimensions to a centralized `DesignSystem` or `Dimens` struct (e.g., `Dimens.profileImageLarge`)."
/Presentation/Modules/Home/HomeView.swift,101,"Magic Number Padding `.padding(.vertical, 8)` / `.padding(.horizontal, 4)`","Design Inconsistency","Standardize padding values (e.g., `Spacing.small`, `Spacing.tiny`) to ensure consistent UI across the app."
